<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jobb</title>
    <link rel="stylesheet" href="/source/style.css">
    <style>
        body {
            width: 90%;
            height: 90%;
            display: flex;
            background-color: #313131;
            background-image: radial-gradient(rgba(255, 255, 255, 0.171) 2px, transparent 0);
            background-size: 30px 30px;
            background-position: -5px -5px;
            justify-content: center;
            align-items: center;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%,-50%);
        }
        #loading {
            width: 1470px;
            height: 781px;
            position: relative;
            overflow: hidden;
        }

        .loader {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to right, rgb(159 159 159 / 0%) 0%, rgb(191 191 191 / 72%) 50%, rgb(0 0 0 / 0%) 100%);
    animation: slide 1s alternate infinite;
}
        @keyframes slide {
            0% {
                transform: translateX(0%);
                width: 0px;
            }
            100% {
                transform: translateX(100%);
                width: 50%;
            }
        }

        p {
            display: none; /* Esconder o parágrafo */
        }
        .title{
    background: #d7d7d7;
    position: absolute;
    width: 400px;
    height: 70px;
    top: 20px;
    border-radius: 10px; 
        }
        .sideleft{
            position: absolute;
    background: #c7c8c7;
    width: 635px;
    height: 630px;
    border-radius: 18px;
    top: 124px;
    left: 60px;
        }
    .siderigth{
        position: absolute;
    background: #c7c8c7;
    width: 635px;
    height: 630px;
    border-radius: 18px;
    top: 124px; 
    right: 60px;
    }
    </style>
    
</head>
<body>
    <div class="borraoverde"></div>

    <div class="borraoroxo"></div>
    <!-- Div de carregamento -->
    <div class="painel" id="loading">
        
    <div class="title"><div class="loader"></div></div>

    <div class="sideleft"><div class="loader"></div></div>

    <div class="siderigth"><div class="loader"></div></div>
    </div>


    <script>
        let projects = {
            'value': '10',
            'projeto1': {
                // informações do projeto 1
                'name': 'projeto1',
                'last-data': '5/9/2024',
                'horas': '7.39',
                'acumulado': '14.00',
                'git': 'https://github.com/pedr-moura',
                'format-data': '2024-09-05',
                'type': 'study'
            },
            'projeto2': {
                // informações do projeto 2
                'name': 'projeto2',
                'last-data': '18/9/2024',
                'horas': '2.20',
                'acumulado': '6.39',
                'git': 'https://github.com/pedr-moura',
                'format-data': '2024-09-18',
                'type': 'job'
            },
            'projeto3': {
                // informações do projeto 3
                'name': 'projeto3',
                'last-data': '17/09/2024',
                'horas': '2.50',
                'acumulado': '8.39',
                'git': 'https://github.com/pedr-moura',
                'format-data': '2024-09-17',
                'type': 'study'
            },
            'projeto4': {
                // informações do projeto 3
                'name': 'projeto4',
                'last-data': '17/9/2024',
                'horas': '2.00',
                'acumulado': '23.39',
                'git': 'https://github.com/pedr-moura',
                'format-data': '2024-09-17',
                'type': 'study'
            },
            'projeto5': {
                // informações do projeto 3
                'name': 'projeto5',
                'last-data': '17/9/2024',
                'horas': '12.00',
                'acumulado': '7.39',
                'git': 'https://github.com/pedr-moura',
                'format-data': '2024-09-17',
                'type': 'study'
            },
            'projeto6': {
                // informações do projeto 3
                'name': 'projeto6',
                'last-data': '27/4/2024',
                'horas': '4.62',
                'acumulado': '54.39',
                'git': 'https://github.com/pedr-moura',
                'format-data': '2024-04-27',
                'type': 'job'
            },
            'projeto7': {
                // informações do projeto 3
                'name': 'projeto7',
                'last-data': '24/4/2024',
                'horas': '1.00',
                'acumulado': '7.39',
                'git': 'https://github.com/pedr-moura',
                'format-data': '2024-04-24',
                'type': 'job'
            },
            'projeto8': {
                // informações do projeto 3
                'name': 'projeto8',
                'last-data': '11/9/2024',
                'horas': '7.00',
                'acumulado': '7.39',
                'git': 'https://github.com/pedr-moura',
                'format-data': '2024-09-11',
                'type': 'job'
            },
            'projeto9': {
                // informações do projeto 3
                'name': 'projeto9',
                'last-data': '3/5/2024',
                'horas': '2.00',
                'acumulado': '7.39',
                'git': 'https://github.com/pedr-moura',
                'format-data': '2024-05-03',
                'type': 'job'
            },
            'projeto10': {
                // informações do projeto 3
                'name': 'projeto10',
                'last-data': '9/5/2024',
                'horas': '3.00',
                'acumulado': '1.39',
                'git': 'https://github.com/pedr-moura',
                'format-data': '2024-05-09',
                'type': 'job'
            },
            'projetodiferente11': {
                // informações do projeto 3
                'name': 'projeto11',
                'last-data': '9/5/2024',
                'horas': '9.00',
                'acumulado': '7.39',
                'git': 'https://github.com/pedr-moura',
                'format-data': '2024-05-09',
                'type': 'job'
            },
            'projetomaisdiferente12': {
                // informações do projeto 3
                'name': 'projeto12',
                'last-data': '10/5/2024',
                'horas': '3.00',
                'acumulado': '7.39',
                'git': 'https://github.com/pedr-moura',
                'format-data': '2024-05-10',
                'type': 'job'
            }
        };

        // Contar quantos projetos existem
        let totalProjects = Object.keys(projects).length - 1; // Excluindo a chave 'value'

        // Convertendo o objeto projects em JSON
        let projectsJSON = JSON.stringify(projects, null, 4);

        // Criando uma div para exibir o JSON
        let jsonDiv = document.createElement('p');
        jsonDiv.textContent = projectsJSON;

        // Adicionando a div ao corpo do documento
        document.body.appendChild(jsonDiv);
        
        // Armazenando o JSON em localStorage
        localStorage.setItem('projectsData', projectsJSON);

        // Recuperando os dados salvos no localStorage
        let retrievedData = localStorage.getItem('projectsData');

        // Verificando quantos projetos foram salvos no localStorage
        let savedProjects = retrievedData ? Object.keys(JSON.parse(retrievedData)).length - 1 : 0;

               // Função para obter parâmetro GET da URL
               function obterParametroGET(nome) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(nome);
        }

        // Função para redirecionar para uma URL
        function redirecionarPara(url) {
            window.location.href = url;
        }

        const idUsuario = obterParametroGET('id');


setTimeout(() => {

    if (totalProjects !== 0 && idUsuario !== null) {
        // Redireciona para a página com os parâmetros corretos
        redirecionarPara(`../?id=${idUsuario}&auth=1`);
    } else {

        document.getElementById('loading').style.display = 'none';

        redirecionarPara(`../login`);
    }
}, 1000); // Tempo em milissegundos (5 segundos)


    </script>
</body>
</html>
